<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkers</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      margin: 0;
      padding: 0;
    }
    canvas {
      border: 4px solid #333;
      border-radius: 8px;
      background-color: #fff;
    }
    .reset-button, .undo-button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    .reset-button:hover, .undo-button:hover {
      background-color: #45a049;
    }
    .treasure {
      width: 80px;
      height: 80px;
      background: url('https://cdn-icons-png.flaticon.com/512/3081/3081986.png') no-repeat center/cover;
      position: relative;
    }
    .gem {
      width: 16px;
      height: 16px;
      background: url('https://cdn-icons-png.flaticon.com/512/650/650143.png') no-repeat center/contain;
      position: absolute;
      animation: dropGem 1s ease forwards;
    }
    @keyframes dropGem {
      from { top: -30px; opacity: 0; }
      to { top: 20px; opacity: 1; }
    }
  </style>
</head>
<body class="flex flex-col items-center p-6">

  <!-- Player Name Setup -->
  <div id="nameInput" class="flex flex-col items-center space-y-4">
    <h1 class="text-3xl font-bold">Enter Player Names</h1>
    <input type="text" id="playerRed" placeholder="Red Player Name" class="border p-2 rounded"/>
    <input type="text" id="playerBlack" placeholder="Black Player Name" class="border p-2 rounded"/>
    <button onclick="startGame()" class="reset-button">Start Game</button>
  </div>

  <!-- Main Game -->
  <div id="gameUI" class="hidden flex flex-col items-center space-y-4">
    <div class="flex items-center justify-between w-full max-w-xl">
      <div class="text-xl font-semibold"><span id="redName">Red</span> Coins: <span id="redCoins">0</span></div>
      <div class="text-xl font-semibold"><span id="blackName">Black</span> Coins: <span id="blackCoins">0</span></div>
    </div>

    <div id="messageBox" class="text-xl font-bold text-blue-700"></div>
    <canvas id="checkerboard" width="600" height="600"></canvas>

    <div class="flex space-x-4">
      <button id="resetButton" class="reset-button">Reset</button>
      <button id="undoButton" class="undo-button">Undo</button>
    </div>

    <!-- Treasure Chest -->
    <div id="treasure" class="treasure mt-6 hidden"></div>
  </div>

  <!-- Leaderboard -->
  <div class="mt-10 w-full max-w-xl">
    <h2 class="text-2xl font-bold mb-2">üèÜ Leaderboard</h2>
    <ul id="leaderboard" class="space-y-1 text-lg text-gray-800"></ul>
  </div>

  <!-- Sounds -->
  <audio id="jumpSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8509567329.mp3?filename=pop-94319.mp3" preload="auto"></audio>
  <audio id="kingSound" src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_9e8fe28517.mp3?filename=notification-89939.mp3" preload="auto"></audio>
  <audio id="winSound" src="https://cdn.pixabay.com/download/audio/2022/10/03/audio_33c1b4bfa0.mp3?filename=success-fanfare-trumpets-6185.mp3" preload="auto"></audio>

  <script>
    // Core game functions to be reattached
    function drawBoard() {
      const canvas = document.getElementById("checkerboard");
      if (!canvas) return;
      const ctx = canvas.getContext("2d");
      const CELL_SIZE = canvas.width / 8;

      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const isDark = (row + col) % 2 !== 0;
          ctx.fillStyle = isDark ? '#b58863' : '#f0d9b5';
          ctx.fillRect(col * CELL_SIZE, row * CELL_SIZE, CELL_SIZE, CELL_SIZE);

          const piece = board[row][col];
          if (piece !== 0) {
            ctx.beginPath();
            ctx.arc(col * CELL_SIZE + CELL_SIZE / 2, row * CELL_SIZE + CELL_SIZE / 2, CELL_SIZE / 2.5, 0, 2 * Math.PI);
            ctx.fillStyle = piece === 1 || piece === 3 ? '#cc0000' : '#333';
            ctx.fill();

            if (piece === 3 || piece === 4) {
              ctx.fillStyle = 'gold';
              ctx.font = `${CELL_SIZE * 0.6}px Arial`;
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillText('‚ôî', col * CELL_SIZE + CELL_SIZE / 2, row * CELL_SIZE + CELL_SIZE / 2);
            }
          }
        }
      }
    }
  </script>
</body>
</html>
